server {
    # Network Configuration
    listen 0.0.0.0:8080
    listen 127.0.0.1:8081
    server_name localhost
    server_name example.com

    # Connection Settings (required)
    backlog 512
    max_clients 100
    keepalive_timeout 30
    keepalive_max_requests 100

    # Logging (required)
    access_log runtime/logs/access.log
    error_log runtime/logs/error.log

    # Document Root (required)
    root runtime/www
    index runtime/www/index.html
    autoindex off

    # HTTP Settings (required)
    client_max_body_size 10485760
    allow_methods GET POST DELETE

    # Error Pages
    error_page 404 runtime/www/errors/40x.html
    error_page 403 400 runtime/www/errors/40x.html
    error_page 500 503 runtime/www/errors/50x.html

    # CGI Configuration
    cgi_path runtime/www/cgi-bin
    cgi_ext .cgi .pl .py .php

    # Location: Static files
    location / {
        root runtime/www
        index runtime/www/index.html
        autoindex off
        allow_methods GET
        client_max_body_size 10485760
    }

    # Location: File uploads
    location /uploads {
        root runtime/www/uploads
        autoindex on
        allow_methods GET POST DELETE
        client_max_body_size 52428800
        upload_enabled on
        upload_store runtime/www/uploads
    }

    # Location: CGI scripts
    location /cgi-bin {
        root runtime/www/cgi-bin
        allow_methods GET POST
        client_max_body_size 1048576
        cgi_path runtime/www/cgi-bin
        cgi_ext .py .php .cgi
    }

    # Location: Redirect example
    location /redirect {
        redirect 301 https://example.com/new-location
        allow_methods GET
    }

    # Location: API endpoint
    location /api {
        root runtime/www/api
        allow_methods GET POST DELETE
        client_max_body_size 1048576
        autoindex off
    }
}

server {
    # Second server block example
    listen 0.0.0.0:9090
    server_name admin.example.com

    backlog 256
    max_clients 50
    keepalive_timeout 15
    keepalive_max_requests 50

    access_log runtime/logs/admin_access.log
    error_log runtime/logs/admin_error.log

    root runtime/www/admin
    index runtime/www/admin/index.html
    autoindex on

    client_max_body_size 5242880
    allow_methods GET POST

    error_page 404 runtime/www/errors/40x.html
    error_page 500 runtime/www/errors/50x.html

    location /admin {
        root runtime/www/admin
        index runtime/www/admin/index.html
        autoindex on
        allow_methods GET POST
        client_max_body_size 5242880
    }
}
