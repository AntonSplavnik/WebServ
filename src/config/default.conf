server {
  listen 127.0.0.1:8080;          # host:port
  server_name localhost;

  root ./www;
  index index.html;

  backlog 128;                    # listen() backlog
  poll_timeout_ms 5000;

  client_max_body_size 5M;
  max_header_bytes 16k;
  max_request_line 4k;

  logging {
    level debug;
    access_log logs/access.log;
    error_log  logs/error.log;
  }

  error_page 404 /errors/404.html;
  error_page 405 /errors/405.html;
  error_page 413 /errors/413.html;

  location / {
    methods GET;
    autoindex off;
  }

  location /upload {
    methods POST;
    upload_store ./uploads;
  }

  location /cgi-bin {
    methods GET POST;
    cgi_pass python /usr/bin/python3;   # interpreter
    cgi_ext .py;                        # optional filter
  }

  location /old {
    return 301 /new;
  }
}
